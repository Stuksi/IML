<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iml</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
    <link rel="stylesheet" type="text/css" href="doc_styles.css">
</head>
<body class="article tableofcontents2 tableofcontents-right">
    <div id="header">
        <h1>iml</h1>
        <div class="details">
            <span id="author" class="author">author</span><br>
            <span id="info" class="info">
                <a class="bare">Stoyan Grozdanov</a>
            </span><br>
            <span id="author2" class="author">repository</span><br>
            <span id="info2" class="info">
                <a href="https://github.com/Stuksi/IML" class="bare">https://github.com/Stuksi/IML</a><br>
            </span>
        </div>
        <div id="tableofcontents" class="tableofcontents2">
            <div id="tableofcontentstitle">
                Table of Contents
            </div>
            <ul class="level1">
                <li>
                    <a href="#overview">1. Overview</a>
                    <ul class="level2">
                        <li><a href="#overview.introduction">1.1 Introduction</a></li>
                        <li><a href="#overview.license">1.2 License</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#install">2. Installation</a>
                    <ul class="level2">
                        <li><a href="#install.getting">2.1 Getting iml</a></li>
                        <li><a href="#install.building">2.2 Building iml</a></li>
                        <li><a href="#install.portability">2.3 Portability</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#ps">3. Project structure</a>
                    <ul class="level2">
                        <li><a href="#ps.cpp">3.1 C++ interface</a></li>
                        <li><a href="#ps.grammar">3.2 iml grammar</a></li>
                        <li><a href="#ps.memory">3.3 Memory management</a></li>
                        <li><a href="#ps.errors">3.4 Handling interpreting errors</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#loading">4. Loading document</a>
                    <ul class="level2">
                        <li><a href="#loading.file">4.1 Loading document from file</a></li>
                        <li><a href="#loading.memory">4.2 Loading document from memory</a></li>
                        <li><a href="#loading.stream">4.3 Loading document from stream</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#apiref">5. API Reference</a>
                    <ul class="level2">
                        <li><a href="#apiref.enums">5.1 Enumerations</a></li>
                        <li><a href="#apiref.classes">5.2 Classes</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div id="content">
        <div class="sectionlevel1">
            <h2 id="overview"><a class="anchor" href="#overview"></a><a class="link" href="#overview">1. Overview</a></h2>
            <div class="sectionbody">
                <div class="sectionlevel2">
                    <h3 id="overview.introduction"><a class="anchor" href="#overview.introduction"><a class="link" href="#overview.introduction">1.1 Introduction</a></h3>
                    <div class="paragraph">
                        <p>
                            <a href="https://github.com/Stuksi/IML">iml</a> is a light weight C++ language 
                            interpreter library. It consists of a extremely fast interpreting/interpreting
                            mechanism. The iml language is inspired by an uni data structutes project
                            <a href="https://docs.google.com/document/d/1MXNOaWoTIxODs8LzAuqIOLq4j4mkw4ZweVLvbJe6XKs/edit">IML</a>.   
                            It is easy to develop new tags, and its very easy to integrate and use the library.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a href="https://docs.google.com/document/d/1MXNOaWoTIxODs8LzAuqIOLq4j4mkw4ZweVLvbJe6XKs/edit">IML</a>
                             as a language can be used to evaluate mathematical expressions with the use of
                            tags or to structure arrays which can be used with other programs. <a href="https://github.com/Stuksi/IML">iml</a>
                            provides a small range of tags to be played with.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            If you want to start writing code as quickly as possible, here are some examples
                            representing some <a href="https://docs.google.com/document/d/1MXNOaWoTIxODs8LzAuqIOLq4j4mkw4ZweVLvbJe6XKs/edit">IML</a>
                            syntax and how to use the interpreter: <a href="">example</a>.
                        </p>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="overview.license"><a class="anchor" href="#overview.license"></a><a class="link" href="#overview.license">1.2 License</a></h3>
                    <div class="paragraph">
                        <p>The iml library is distributed under the GNU license:</p>
                        <div class="literalblock">
                            <div class="content">
                                <pre class="pygments highlight">
GNU General Public License v3.0

Permissions of this strong copyleft license are conditioned 
on making available complete source code of licensed works 
and modifications, which include larger works using a licensed 
work, under the same license. Copyright and license notices
must be preserved. Contributors provide an express grant of patent rights.
                                </pre>
                            </div>
                        </div>
                        <div class="paragraph">
                            This means that you can freely use iml in your applications open-source.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sectionlevel1">
            <h2 id="install"><a class="anchor" href="#install"></a><a class="link" href="#install">2. Installation</a></h2>
            <div class="sectionbody">
                <div class="sectionlevel2">
                    <h3 id="install.getting"><a class="anchor" href="#install.getting"></a><a class="link" href="#install.getting">2.1 Getting iml</a></h3>
                    <div class="paragraph">
                        <p>iml is distributed in source form. You can either download a source distribution or clone the git repository.</p>
                    </div>
                    <div class="sectionlevel3">
                        <h4 id="install.getting.source"><a class="anchor" href="#install.getting.source"</a><a class="link" href="#install.getting.source">2.1.1 Source distribution</a></h4>
                        <div class="paragraph">
                            <p>You can download the latest source distribution as an archive:</p>
                        </div>
                        <div class="paragraph">
                            <p>
                                <a href="https://github.com/Stuksi/iml/releases/iml.zip">iml.zip</a> (Windows)
                                /
                                <a href="https://github.com/Stuksi/iml/releases/iml.tar">iml.tar</a> (Linux)
                            </p>
                        </div>
                        <div class="paragraph">
                            <p>
                                The distribution contains library source, documentation (the one you're reading now), code examples and tests.
                                After downloading, install iml by extracting all files from the compressed archive.
                            </p>
                        </div>
                    </div>
                    <div class="sectionlevel3">
                        <h4 id="install.getting.git"><a class="anchor" href="#install.getting.git"></a><a class="link" href="#install.getting.git">2.1.2 Git repository</a></h4>
                        <div class="paragraph">
                            <p>
                                The Git repository is located at <a href="https://github.com/Stuksi/iml/" class="bare">https://github.com/Stuksi/iml/</a>.
                            </p>
                        </div>
                        <div class="paragraph">
                            <p>
                                To get the current version, you can use this command:
                            </p>
                        </div>
                        <div class="listingblock">
                            <div class="content">
                                <pre class="pygments"><code data-lang="bash">git clone https://github.com/Stuksi/iml/</code></pre>
                            </div>
                        </div>
                        <div class="paragraph">
                            <p>
                                The repository contains library source, documentation, code examples and tests.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="install.building"><a class="anchor" href="#install.building"></a><a class="link" href="#install.building">2.2 Building iml</a></h3>
                    <div class="paragraph">
                        <p>
                            The complete iml source consists of different files - source files in the 'src' folder, 
                            and header files, in the 'include' folder. iml.h is the primary header which you need to 
                            include in order to use iml classes/functions. Make sure that iml.h is either in the current 
                            directory or in one of the include directories of your projects, so that #include "iml.h" can 
                            find the header. However you can also use relative path (i.e. #include "../libs/iml/include/iml.h"). 
                        </p>
                    </div>
                    <div class="sectionlevel3">
                        <h4 id="install.building.embed"><a class="anchor" href="#install.building.embed"></a><a class="link" href="#install.building.embed">2.2.1 Building iml as a static library</a></h4>
                        <div class="paragraph">
                            <p>
                                The easiest way to build iml is to compile the files in the source folder, along with the current project.
                            </p>
                        </div>
                        <div class="paragraph">
                            <p>
                                For this way, assuming that the project is called 'main', you can use the command:
                            </p>
                        </div>
                        <div class="listingblock">
                            <div class="content">
                                <pre class="pygments"><code data-lang="bash">c++ main.cpp /iml/src/*.cpp</code></pre>
                            </div>
                        </div>
                    </div>
                    <div class="sectionlevel3">
                        <h4 id="install.building.header"><a class="anchor" href="#install.building.header"></a><a class="link" href="#install.building.header">2.2.2 Building iml in header-only mode</a></h4>
                        <div class="paragraph">
                            <p>
                                It's possible to use iml in header-only mode. This means that all source code for iml 
                                will be included in every program that includes <code>iml.h</code>. This is how the C++
                                STL library works.
                            </p>
                        </div>
                        <div class="paragraph">
                            <p>
                                Note that there are advantages and drawbacks of this approach. Header mode may improve 
                                performance (because many simple functions will be inlined). However, since the compiler 
                                now has to compile iml source files once for each program that includes it, compilation 
                                times may increase noticeably.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="install.portability"><a class="anchor" href="#install.portability"></a><a class="link" href="#install.portability">2.3 Portability</a></h3>
                    <div class="paragraph">
                        <p>
                            iml is written in standard-compliant C++. iml is compatible with the C++11 standard. 
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            iml can be compiled using any C++ compiler and runs on Microsoft Windows and Linux. 
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="sectionlevel1">
            <h2 id="ps"><a class="anchor" href="#ps"></a><a class="link" href="#ps">3. Project structure</a></h2>
            <div class="sectionbody">
                <div class="sectionlevel2">
                    <h3 id="ps.cpp"><a class="anchor" href="#ps.cpp"></a><a class="link" href="#ps.cpp">3.1 C++ interface</a></h3>
                    <div class="paragraph">
                        <p>
                            <a id="iml_interpreter"></a>
                            <code>iml</code> is the owner of the entire library structure. The interface of <code>iml</code> consists of the 
                            loading functions (see <a href="#loading">Loading document</a>), which allow for document interpretation/evaluation.
                        </p>
                    </div>
                    <div>
                        <p>
                            <code>iml</code> is instantiated by the default constructor.
                            The loading functions of <code>iml</code> call <code>iml_interpreter</code> to evaluate the input. 
                            All the final results(errors/correct answers) are then printed in the output file.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a id="iml_interpreter"></a>
                            <code>iml_interpreter</code> then uses <code>iml_tokenizer</code> to convert the input to <code>iml_token</code> tokens.
                            Considering the IML grammar (see <a href="#ps.grammar">iml grammar</a>), <code>iml_interpreter</code> examines the input and
                            making use of <code>std::stack</code> stores the tags in a hierarchy.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <code>iml_interpreter</code> initiates the interpreting process after its public method <code>build</code> is called:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-kt">void</span> <span class="tok-n">build</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">istream</span><span class="tok-o">&</span> <span class="tok-n">in</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">ostream</span><span class="tok-o">&</span> <span class="tok-n">out</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            <code>build</code> initializes the list of tokens, and starts evaluating the expressions. Then the output is saved.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            The tag attributes which have some name-value linkage are stored in a <code>std::unordered_map</code>. The <code>std::unordered_map</code> stores
                            the coresponding to the names, values in a stack, so that nested defining is possible. 
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            After a closing tag has appeared, the last inserted tag is popped from the stack, and its evaluation is stored
                            in the previous in the hierarchy tag. If any errors occur while reading the file or there is some undefined
                            behaiviour, the interpreter stops working, and displays an error message, showing where and what the problem
                            is (see <a href="ps.errors">Handling interpreting errors</a>).
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a id="iml_root"></a>
                            There is a special tag <code>iml_root_tag</code> which indicates the start and end of the interpreting. It is
                            an empty tag, and its evaluation is just retrieving the inserted values. Its the tag which stores all the final
                            information and gives it to the output.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a id="iml_tag"></a>
                            The <code>iml_root_tag</code> inherits the base tag class <code>iml_tag</code>. <code>iml_tag</code> 
                            consists of a type and a list of values. It is a polymorphic type class. <code>iml_tag</code> lets
                            derived classes make changes to the values, and it retrieves the values by using the evaluation function, which
                            every derived class must implement, because it is a pure virtual function, modifying the information
                            based on the tag type.
                        </p>
                    </div>  
                    <div class="paragraph">
                        <a id="iml_tag::set_values"></a><a id="iml_tag::add_values"></a><a id="iml_tag::add_value"></a><a id="iml_tag::type"></a><a id="iml_tag::set_attribute"></a><a id="iml_tag::get_attribute"></a><a id="iml_tag::eval"></a>
                        <p>
                            <code>iml_tag</code>'s class members can be accessed by:
                        </p>
                    </div>  
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml_tag_type</span> <span class="tok-n">type</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">void</span> <span class="tok-n">set_values</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">list_values</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-n">add_values</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">list_values</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <span class="tok-n">add_value</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                           <code>add_value</code> and <code>add_values</code> are used for inserting new elements in the tag. <code>type()</code> returns
                           the type of the tag and <code>set_values</code> replaces the current values.
                        </p>
                    </div>  
                    <div class="paragraph">
                        <p>
                            The virtual methods and the pure virtual evaluation method:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"></code><span class="tok-k">virtual</span> <span class="tok-kt">void</span> <span class="tok-n">set_attribute</span><span class="tok-p">(</span><span class="tok-n">iml_attribute</span> <span class="tok-n">_attribute</span><span class="tok-p">);</span>
<span class="tok-k">virtual</span> <span class="tok-n">iml_attribute</span> <span class="tok-n">get_attribute</span><span class="tok-p">() <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">eval</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a id="iml_tag_type"></a>
                            The current <code>iml_tag_type</code>'s are based on <a href="https://docs.google.com/document/d/1MXNOaWoTIxODs8LzAuqIOLq4j4mkw4ZweVLvbJe6XKs/edit">IML</a> and it is very easy to implement new ones.
                            You can see the current types <a href="#apiref.enums">here</a>.
                        </p>
                    </div>  
                    <div class="paragraph">
                        <p>
                            <a id="iml_tag_attribute"></a><a id="iml_tag_attribute::set_attribute"></a><a id="iml_tag_attribute::get_attribute"></a><a id="iml_tag_attribute::eval"></a>
                            There is another polymorphic base class <code>iml_tag_attribute</code>. It covers the tags
                            which need an attribute to logically and properly function. It is derived from the base class
                            <code>iml_tag</code>. <code>iml_tag_attribute</code>'s only difference is the <code>attribute</code> parameter which it stores.
                            Every derived of <code>iml_tag_attribute</code> class must be provided with a method for initializing/setting
                            the attribute parameter. Every attribute tag can have different types of arguments in the attribute,
                            so thats why, every <code>iml_tag_attribute</code> must analyze the attribute on its own.    
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            <code>iml_tag_attribute</code>'s methods:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml_attribute</span> <span class="tok-n">iml_attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">virtual</span> <span class="tok-kt">void</span> <span class="tok-n">set_attribute</span><span class="tok-p">(</span><span class="tok-n">iml_attribute</span> <span class="tok-n">_attribute</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span>
<span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">eval</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            <a id="iml_attribute"></a><a id="iml_attribute::ctor"></a><a id="iml_attribute::get"></a><a id="iml_attribute::set"></a>
                            The class <code>iml_attribute</code> contains a string member indicating the contents of the attribute.
                            It is provided with its coresponding setters and getters:   
                        </p>
                    </div>                         
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-kt">void</span> <span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">attribute_info</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">get</span><span class="tok-p">() <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            Also a default constructor and a parameterized constructor: 
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml_attribute</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-k">default</span><span class="tok-p">;</span>
<span class="tok-n">iml_attribute</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">attribute_info</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <a id="iml_tokenizer"></a><a id="iml_tokenizer::ctor"></a><a id="iml_tokenizer::tokenize"></a>
                        <p>
                            All of the expression evaluation is made as simple as possible because of the <code>iml_tokenizer</code>. The <code>iml_tokenizer</code>
                            converts all the characters, numbers, strings, symbols, etc. to tokens, which are more simpler to work with and at the end of the day
                            the code is much more readable. Tokenizing is an elegant way of parsing an input. The class is initialized with a stream(construtor) and then using the
                            <code>tokenize()</code> method, all the input is stored in a list of <code>iml_token</code>s and is ready to be expressed. 
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml_tokenizer</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">istream</span><span class="tok-o">&</span> <span class="tok-n">_in</span><span class="tok-p">);</span> 
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-n">iml_token</span><span class="tok-p">&gt;</span> <span class="tok-n">tokenize</span><span class="tok-p">();</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <a id="iml_tag_factory"></a><a id="iml_tag_factory::stotag"></a><a id="iml_tag_factory::stotype"></a><a id="iml_tag_factory::typetos"></a>
                        <p>
                            For easier type conversion, <code>iml_tag_factory</code> handles that problem.
                            <code>iml_tag_factory</code> has the options to convert from a <code>std::string</code> to an <code>iml_tag_type</code> with <code>stotype()</code> or <code>iml_tag*</code> with <code>stotag</code>,
                            and <code>iml_tag_type</code> can be converted to <code>std::string</code> with <code>typetos()</code>.
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml_tag</span><span class="tok-o">*</span> <span class="tok-n">stotag</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">type</span><span class="tok-p">);</span> 
<span class="tok-n">iml_tag_type</span> <span class="tok-n">stotype</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">type</span><span class="tok-p">);</span>   
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">typetos</span><span class="tok-p">(</span><span class="tok-n">iml_tag_type</span> <span class="tok-n">type</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="ps.grammar"><a class="anchor" href="#ps.grammar"></a><a class="link" href="#ps.grammar">3.2 iml grammar</a></h3>
                    <div class="literalblock">
                        <div class="content">
                            <pre>

expression              := tag_expression , expression | value , expression | "" ;
tag_expression          := open_tag , expression , [let_tag_expression] , close_tag ;
let_tag_expreesion      := body_tag , expression
open_tag                := "&lt;" , string , [ attribute ] , "&gt;"
body_tag                := "&lt;" , "BODY" , "/" , "&gt;" ;
close_tag               := "&lt;" , "/" , string , "&gt;" ; 
attribute               := """ , value , """ ;
value                   := double | string ;
string                  := {"A" ... "Z"}+ ;
double                  := ["-"] , "0" | ("1" | ... | "9" , {"0" ... "9"}) , ["." , {"0" ... "9"}+] ;



Used Symbols:
:=         --->         definition
,          --->         concatenation
|          --->         alternation
[...]      --->         optional
{...}      --->         repetition 
"..."      --->         terminal string
;          --->         termination
"" ... ""  --->         range
+          --->         minimum one

                            </pre>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="ps.memory"><a class="anchor" href="#ps.memory"></a><a class="link" href="#ps.memory">3.3 Memory management</a></h3>
                    <div class="paragraph">
                        <p>
                            All memory allocation/deallocation is handled by the data structures used in the program.
                        </p>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="ps.errors"><a class="anchor" href="#ps.errors"></a><a class="link" href="#ps.errors">3.4 Handling interpreting errors</a></h3>
                    <div class="paragraph">
                        <p>
                            The interpreter handles the errors dynamicly while the expressions are evaluating. If an error occures the interpreting stops and
                            the error message of where and what is the problem is sent to the output and printed on in the output file. 
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="sectionlevel1">
            <h2 id="loading"><a class="anchor" href="#loading"></a><a class="link" href="#loading">4. Loading document</a></h2>
            <div class="sectionbody">
                <div class="sectionlevel2">
                    <h3 id="loading.file"><a class="anchor" href="#loading.file"></a><a class="link" href="#loading.file">4.1 Loading document from file</a></h3>
                    <div class="paragraph">
                        <a id="iml::interpret_file"></a>
                        <p>
                            Writing the data in a separate file lets the user concentrate over the input
                            and gives the oportunity the user to check if the output is correct after executing 
                            the program. It is also great for testing the behaiviour of the software.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            iml provides a dedicated function for loading an IML document from file:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-kt">void</span> <span class="tok-n">iml</span><span class="tok-o">::</span><span class="tok-nf">interpret_file</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">input_file_path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span> <span class="tok-o">=</span> <span class="tok-s">"iml_result.imlr"</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            This function accepts the input file path as its first argument, and also an optional argument, which
                            specifies the output file path.<code>interpret_file</code> tries to load the new specified file.
                             The path has the target operating system format, so it can be a relative 
                            or absolute one, it should have the delimiters of the target system, it should have the exact case 
                            if the target file system is case-sensitive, etc.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            This is an example of loading IML document from file (<a href="https://github.com/Stuksi/iml/samples/load_file.cpp">samples/load_file.cpp</a>):
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml</span> <span class="tok-n">doc</span><span class="tok-p">;</span>

<span class="tok_n">doc</span><span class="tok_p">.</span><span class="tok-n">interpret_file</span><span class="tok-p">(</span><span class="tok-s">"iml_file.iml"</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="loading.memory"><a class="anchor" href="#loading.memory"></a><a class="link" href="#loading.memory">4.2 Loading document from memory</a></h3>
                    <div class="paragraph">
                        <a id="iml::interpret_buffer"></a>
                        <p>
                            There is a function for the people that want to load an IML document from a null-terminated character string:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-kt">void</span> <span class="tok-n">iml</span><span class="tok-o">::</span><span class="tok-nf">interpret_buffer</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">input_buffer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span> <span class="tok-o">=</span> <span class="tok-s">"iml_result.imlr"</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            The function converts the IML data to a stream and then it is interpreted.
                        </p>
                    </div>
                    <div class="paragraph">
                        <p>
                            An example of loading IML document from memory (<a href="https://github.com/Stuksi/iml/samples/load_buffer.cpp">samples/load_buffer.cpp</a>):
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml</span> <span class="tok-n">doc</span><span class="tok-p">;</span>

<span class="tok_n">doc</span><span class="tok_p">.</span><span class="tok-n">interpret_buffer</span><span class="tok-p">(</span><span class="tok-s">"&lt;MAP-INC&gt;1 2 3 4 5&lt;/MAP-INC&gt;"</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="loading.stream"><a class="anchor" href="#loading.stream"></a><a class="link" href="#loading.stream">4.3 Loading document from stream</a></h3>
                    <div class="paragraph">
                        <a id="iml::interpret_stream"></a>
                        <p>
                            An IML document can be provided as a stream and interpreted using the function:
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-kt">void</span> <span class="tok-n">iml</span><span class="tok-o">::</span><span class="tok-nf">interpret_stream</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">istream</span><span class="tok-o">&</span> <span class="tok-n">input_stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span> <span class="tok-o">=</span> <span class="tok-s">"iml_result.imlr"</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                    <div class="paragraph">
                        <p>
                            An example of loading IML document from a stream (<a href="https://github.com/Stuksi/iml/samples/load_stream.cpp">samples/load_stream.cpp</a>):
                        </p>
                    </div>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments"><code data-lang="c++"><span class="tok-n">iml</span> <span class="tok-n">doc</span><span class="tok-p">;</span>

<span class="tok_n">doc</span><span class="tok_p">.</span><span class="tok-n">interpret_stream</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cin</span><span class="tok-p">);</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sectionlevel1">
            <h2 id="apiref"><a class="anchor" href="#apiref"></a><a class="link" href="#apiref">5. API Reference</a></h2>
            <div class="sectionbody">
                <div class="sectionlevel2">
                    <h3 id="apiref.enums"><a class="anchor" href="#apiref.enums"></a><a class="link" href="#apiref.enums">5.1 Enumerations</a></h3>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments highlight"><code data-lang="c++"><span class="tok-k">enum</span> <a href="#iml_token_type">iml_token_type</a>
    <a href="#open_bracket">open_bracket</a>
    <a href="#close_bracket">close_bracket</a>
    <a href="#quote">quote</a>
    <a href="#slash">slash</a>
    <a href="#number">node_cdata</a>
    <a href="#string">node_comment</a>
    <a href="#invalid">node_pi</a>

<span class="tok-k">enum</span> <a href="#iml_tag_type">iml_tag_type</a>
    <a href="#iml_root">iml_root</a>
    <a href="#map_inc">map_inc</a>
    <a href="#let">let</a></code></pre>
                        </div>
                    </div>
                </div>
                <div class="sectionlevel2">
                    <h3 id="apiref.classes"><a class="anchor" href="#apiref.classes"></a><a class="link" href="#apiref.classes">5.2 Classes</a></h3>
                    <div class="listingblock">
                        <div class="content">
                            <pre class="pygments highlight"><code data-lang="c++"><span class="tok-k">class</span> <a href="#iml_attribute">iml_attribute</a>
    <a href="#iml_attribute::ctor">iml_attribute</a><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-k">default</span><span class="tok-p">;</span>
    <a href="#iml_attribute::ctor">iml_attribute</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">attribute_info</span><span class="tok-p">);</span>                        
    <span class="tok-kt">void</span> <a href="#iml_attribute::set">set</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">attribute_info</span><span class="tok-p">);</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <a href="#iml_attribute::get">get</a><span class="tok-p">() <span class="tok-k">const</span><span class="tok-p">;</span>
    
<span class="tok-k">class</span> <a href="#iml_tag">iml_tag</a>
    <span class="tok-n">iml_tag_type</span> <a href="#iml_tag::type">type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">void</span> <a href="#iml_tag::set_values">set_values</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">list_values</span><span class="tok-p">);</span>
    <span class="tok-kt">void</span> <a href="#iml_tag::add_values">add_values</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <span class="tok-n">list_values</span><span class="tok-p">);</span>
    <span class="tok-kt">void</span> <a href="#iml_tag::add_value">add_value</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">void</span> <a href="#iml_tag::set_attribute">set_attribute</a><span class="tok-p">(</span><span class="tok-n">iml_attribute</span> <span class="tok-n">_attribute</span><span class="tok-p">);</span>
    <span class="tok-k">virtual</span> <span class="tok-n">iml_attribute</span> <a href="#iml_tag::get_attribute">get_attribute</a><span class="tok-p">() <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <a href="#iml_tag::eval">eval</a><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span>

<span class="tok-k">class</span> <a href="#iml_tag_attribute">iml_tag_attribute</a>
    <span class="tok-n">iml_attribute</span> <a href="#iml_tag_attribute::get_attribute">get_attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">void</span> <a href="#iml_tag_attribute::set_attribute">set_attribute</a><span class="tok-p">(</span><span class="tok-n">iml_attribute</span> <span class="tok-n">_attribute</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span>
    <span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <a href="#iml_tag_attribute::eval">eval</a><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-mi">0</span></span><span class="tok-p">;</span>

<span class="tok-k">class</span> <a href="#iml_tag_factory">iml_tag_factory</a>
    <span class="tok-n">iml_tag</span><span class="tok-o">*</span> <a href="#iml_tag_factory::stotag">stotag</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">type</span><span class="tok-p">);</span> 
    <span class="tok-n">iml_tag_type</span> <a href="#iml_tag_factory::stotype">stotype</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <span class="tok-n">type</span><span class="tok-p">);</span>   
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">string</span> <a href="#iml_tag_factory::typetos">typetos</a><span class="tok-p">(</span><span class="tok-n">iml_tag_type</span> <span class="tok-n">type</span><span class="tok-p">);</span>

<span class="tok-k">class</span> <a href="#iml_tokenizer">iml_tokenizer</a>
    <a href="#iml_tokenizer::ctor">iml_tokenizer</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">istream</span><span class="tok-o">&</span> <span class="tok-n">_in</span><span class="tok-p">);</span> 
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-n">iml_token</span><span class="tok-p">&gt;</span> <a href="#iml_tokenizer::tokenize">tokenize</a><span class="tok-p">();</span>

<span class="tok-k">class</span> <a href="#iml_interpreter">iml_interpreter</a>
    <span class="tok-kt">void</span> <a href="#iml_interpreter::build">build</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">istream</span><span class="tok-o">&</span> <span class="tok-n">in</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">ostream</span><span class="tok-o">&</span> <span class="tok-n">out</span><span class="tok-p">);</span>

<span class="tok-k">class</span> <a href="#iml">iml</a>
    <span class="tok-kt">void</span> <a href="#iml::interpret_file">interpret_file</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">input_file_path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span><span class="tok-p">);</span>
    <span class="tok-kt">void</span> <a href="#iml::interpret_buffer">interpret_buffer</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">input_buffer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span><span class="tok-p">);</span>
    <span class="tok-kt">void</span> <a href="#iml::interpret_stream">interpret_stream</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">istream</span><span class="tok-o">&</span> <span class="tok-n">input_stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">output_file_path</span><span class="tok-p">);</span>

<span class="tok-k">class</span> <a href="#iml_tag_attribute">T_A = iml_tag_attribute*</a>
    <a href="#iml_tag_attribute">T_A</a><span class="tok-p">();</span>
    <span class="tok-kt">void</span> <a href="#iml_tag_attribute::set_attribute">set_attribute</a><span class="tok-p">(</span><span class="tok-n">iml_attribute</span> <span class="tok-n">_attribute</span><span class="tok-p">);</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <a href="#iml_tag_attribute::eval">eval</a><span class="tok-p">();</span>

<span class="tok-k">class</span> <a href="#iml_tag">T = iml_tag*</a>
    <a href="#iml_tag">T</a><span class="tok-p">();</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-kt">list</span><span class="tok-p">&lt;</span><span class="tok-kt">double</span><span class="tok-p">&gt;</span> <a href="#iml_tag::eval">eval</a><span class="tok-p">();</span></code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="paragraph">
            <p>
                Documentation idea, html code structure, css code structure from pugixml.
                Last changed: 19.12.2020 14:52
            </p>
        </div>
    </div>
</body>
</html>